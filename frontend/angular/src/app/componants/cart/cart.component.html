<!-- cart.component.html -->
<div class="cart-container">
  <div class="cart-header">
    <h2>Shopping Cart</h2>
    <button *ngIf="cart.items.length > 0" (click)="clearCart()" [disabled]="isUpdating" class="btn btn-danger">
      {{ isUpdating ? 'Clearing...' : 'Clear Cart' }}
    </button>
  </div>

  <div *ngIf="isLoading" class="loading">
    <div class="spinner"></div>
    <p>Loading your cart...</p>
  </div>

  <div *ngIf="!isLoading && cart.items.length === 0" class="empty-cart">
    <div class="empty-cart-content">
      <div class="empty-cart-icon">ðŸ›’</div>
      <h3>Your cart is empty</h3>
      <p>Looks like you haven't added any items to your cart yet.</p>
      <button (click)="continueShopping()" class="btn btn-primary">
        Continue Shopping
      </button>
    </div>
  </div>

  <div *ngIf="!isLoading && cart.items.length > 0" class="cart-content">
    <div class="cart-items">
      <div *ngFor="let item of cart.items" class="cart-item" (click)="onCardClick($event, item.bookId)">
        <div class="item-image">
          <img [src]="getItemImage(item)" [alt]="getItemName(item)" class="product-image">
        </div>

        <div class="item-details">
          <h4 class="item-title">{{ getItemName(item) }}</h4>
          <p class="item-price">${{ getItemPrice(item) | number:'1.2-2' }}</p>
        </div>

        <div class="quantity-controls">
          <button (click)="decrementQuantity(item)" [disabled]="isUpdating || item.quantity <= 1" class="quantity-btn">
            -
          </button>
          <span class="quantity">{{ item.quantity }}</span>
          <button (click)="incrementQuantity(item)" [disabled]="isUpdating" class="quantity-btn">
            +
          </button>
        </div>

        <div class="item-total">
          ${{ getItemTotal(item) | number:'1.2-2' }}
        </div>

        <button (click)="removeItem(item)" [disabled]="isUpdating" class="remove-btn" title="Remove item">
          Ã—
        </button>
      </div>
    </div>

    <div class="cart-summary">
      <div class="summary-card">
        <h3>Order Summary</h3>

        <div class="summary-row">
          <span>Subtotal ({{ cart.items.length }} items)</span>
          <span>${{ cart.total | number:'1.2-2' }}</span>
        </div>

        <div class="summary-row">
          <span>Shipping</span>
          <span>Free</span>
        </div>

        <div class="summary-row">
          <span>Tax</span>
          <span>${{ (cart.total * 0.1) | number:'1.2-2' }}</span>
        </div>

        <div class="summary-row total">
          <span>Total</span>
          <span>${{ (cart.total * 1.1) | number:'1.2-2' }}</span>
        </div>

        <button (click)="proceedToCheckout()" class="btn btn-primary checkout-btn">
          Proceed to Checkout
        </button>

        <button (click)="continueShopping()" class="btn btn-secondary">
          Continue Shopping
        </button>
      </div>
    </div>
  </div>

  <app-modal *ngIf="showModal" [title]="modalTitle" [message]="modalMessage" [type]="modalType"
    (close)="handleModalClose()">
  </app-modal>
</div>